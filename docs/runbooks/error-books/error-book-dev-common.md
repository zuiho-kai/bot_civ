# é”™é¢˜æœ¬ â€” ğŸ’» å¼€å‘è€… / é€šç”¨å¼€å‘ï¼ˆå‰åç«¯å…±ç”¨ï¼‰

> **è®°å½•è§„åˆ™**ï¼šæœ¬æ–‡ä»¶åªè®°å½•è·¨å‰åç«¯çš„é€šç”¨æ•™è®­ï¼ˆåŒç»ˆç«¯åˆ†å·¥ã€æ¥å£å¥‘çº¦ã€å·¥å…·è°ƒç”¨ç­–ç•¥ã€å¤–éƒ¨ CLI é›†æˆã€Git æµç¨‹ã€Code Review æµç¨‹ç­‰ï¼‰ã€‚çº¯å‰ç«¯é—®é¢˜ï¼ˆCSS/ç»„ä»¶/ARIA/React hooksï¼‰å†™ `error-book-dev-frontend.md`ï¼Œçº¯åç«¯é—®é¢˜ï¼ˆæ•°æ®åº“/API/LLM/Agentï¼‰å†™ `error-book-dev-backend.md`ã€‚

### DEV-1 åç«¯ç»ˆç«¯æ”¹äº†å‰ç«¯æ–‡ä»¶

âŒ åç«¯ç»ˆç«¯ä¿®æ”¹ `web/src/components/Chat.tsx`
âœ… åç«¯ç»ˆç«¯åªæ”¹ `server/`ï¼Œå‰ç«¯é—®é¢˜é€šçŸ¥å‰ç«¯ç»ˆç«¯å¤„ç†
> èŒè´£åˆ†ç¦»ï¼Œé¿å…å†²çªã€‚

### DEV-2 æ”¹æ¥å£æ²¡æ›´æ–°å¥‘çº¦æ–‡æ¡£

âŒ åç«¯æ”¹äº† `/api/agents` çš„è¿”å›æ ¼å¼ï¼Œæ²¡æ›´æ–° `docs/api-contract.md`
âœ… æ”¹æ¥å£çš„åŒæ—¶æ›´æ–° `docs/api-contract.md`ï¼Œé€šçŸ¥å‰ç«¯ç»ˆç«¯
> api-contract.md æ˜¯å‰åç«¯å”¯ä¸€çš„åä½œè¾¹ç•Œã€‚

### DEV-3 è”è°ƒé—®é¢˜ç”¨åŒç»ˆç«¯æ¥å›æ’æŸ¥

âŒ WebSocket æ¶ˆæ¯æ”¶ä¸åˆ°ï¼Œå‰ç«¯ç»ˆç«¯æŸ¥ä¸€éã€åç«¯ç»ˆç«¯æŸ¥ä¸€éï¼Œæ¥å›æ²Ÿé€š
âœ… è·¨å±‚é—®é¢˜ç”¨ Agent Team è”è°ƒï¼ˆåè°ƒè€… + å‰ç«¯è°ƒè¯•è€… + åç«¯è°ƒè¯•è€…ï¼‰
> ç®€å•é—®é¢˜å•ç»ˆç«¯ä¿®ï¼Œè·¨å±‚é—®é¢˜ç”¨ Agent Teamã€‚

### DEV-4 å¤æ‚åŠŸèƒ½è·³è¿‡éœ€æ±‚è¯„å®¡

âŒ ç›´æ¥å¼€å§‹å†™ä»£ç ï¼Œæ²¡æœ‰ REQ æ–‡æ¡£
âœ… æ–°åŠŸèƒ½å…ˆèµ°å››æ–¹éœ€æ±‚è¯„å®¡ï¼ˆé˜¶æ®µ1ï¼‰ï¼Œäº§å‡º REQ-XXX.md
> ç®€å• Bug å¯ä»¥è·³è¿‡ï¼Œå¤æ‚åŠŸèƒ½å¿…é¡»è¯„å®¡ã€‚

### DEV-5 å®æ–½ä¸éµå¾ª TDD æ–‡æ¡£

âŒ TDD å®šä¹‰äº†æ¥å£æ ¼å¼ï¼Œå®æ–½æ—¶è‡ªå·±æ”¹äº†å­—æ®µå
âœ… ä¸¥æ ¼æŒ‰ TDD å®æ–½ï¼Œéœ€è¦æ”¹è®¾è®¡å…ˆæ›´æ–° TDD å†æ”¹ä»£ç 
> TDD æ˜¯å¥‘çº¦ï¼Œæ”¹å¥‘çº¦éœ€è¦èµ°æµç¨‹ã€‚

### DEV-6 ä¿®å¤ä»£ç æ—¶åªçœ‹ bug ç‚¹ï¼Œä¸åšå½±å“é¢åˆ†æ

âŒ æ”¹äº†å˜é‡èµ‹å€¼è¯­ä¹‰ï¼ˆå¢é‡â†’è¦†ç›–ï¼‰ï¼Œæ²¡æœ‰æ£€æŸ¥ä¸‹æ¸¸å¼•ç”¨æ˜¯å¦ä»æˆç«‹ï¼Œå¯¼è‡´æ­»ä»£ç ã€è¯­ä¹‰çŸ›ç›¾
âœ… ä¿®å¤å‰ grep æ‰€æœ‰å¼•ç”¨ç‚¹ï¼Œé€ä¸ªç¡®è®¤æ”¹åŠ¨åè¯­ä¹‰æ˜¯å¦æˆç«‹ï¼›æ”¹å®Œååš"æ¶Ÿæ¼ªæ¨æ¼”"
> æ¯æ¬¡ä¿®å¤éƒ½æ”¹å˜ä»£ç ç»“æ„ï¼Œæ”¹å˜æœ¬èº«å¯èƒ½å¼•å…¥æ–°çš„è¾¹ç•Œé—®é¢˜ã€‚ç›®æ ‡æ˜¯ review å¾ªç¯ â‰¤2 è½®ã€‚

**ä¿®å¤å‰å¿…åšæ£€æŸ¥æ¸…å•**:
1. grep è¢«æ”¹å˜é‡/å‡½æ•°çš„æ‰€æœ‰å¼•ç”¨ç‚¹ï¼Œé€ä¸ªç¡®è®¤è¯­ä¹‰æ˜¯å¦ä»æˆç«‹
2. å¦‚æœæ”¹å˜äº†èµ‹å€¼è¯­ä¹‰ï¼ˆå¢é‡â†’è¦†ç›–ã€å¿…ä¼ â†’å¯é€‰ï¼‰ï¼Œè¿½è¸ªæ‰€æœ‰ä¸‹æ¸¸æ¶ˆè´¹è€…
3. æ”¹å®Œååš"æ¶Ÿæ¼ªæ¨æ¼”"ï¼šè¿™ä¸ªæ”¹åŠ¨ä¼šè®©å“ªäº›ä¸‹æ¸¸è¡Œä¸ºå˜åŒ–ï¼Ÿ
4. åˆ å‚æ•°/æ”¹ç­¾åæ—¶ï¼Œgrep æ‰€æœ‰è°ƒç”¨æ–¹ + æµ‹è¯•ä¸­çš„ assert
5. ä¸é éšå¼å‡è®¾ä¿å®‰å…¨ï¼Œç”¨æ˜¾å¼ä»£ç ç»“æ„ä¿å®‰å…¨ï¼ˆelif/identity checkï¼‰

### DEV-7 æŠŠ pytest å•å…ƒæµ‹è¯•å½“æˆ STï¼ˆç³»ç»Ÿæµ‹è¯•ï¼‰éªŒè¯

âŒ è¢«è¦æ±‚"å¯åŠ¨ ST æµ‹è¯•"æ—¶ï¼Œç›´æ¥è·‘ `pytest tests/`ï¼Œå£°ç§°"å…¨ç»¿=éªŒè¯é€šè¿‡"
âœ… ST æµ‹è¯• = å¯åŠ¨çœŸå®æœåŠ¡å™¨ + è°ƒç”¨çœŸå® API + è§‚å¯ŸçœŸå®è¡Œä¸º
> å•å…ƒæµ‹è¯•å…¨ç»¿åªèƒ½è¯æ˜ mock ç¯å¢ƒä¸‹é€»è¾‘æ­£ç¡®ï¼Œä¸èƒ½è¯æ˜çœŸå®ç¯å¢ƒä¸‹ç«¯åˆ°ç«¯æµç¨‹å¯ç”¨ã€‚

**åŒºåˆ†æ¸…å•**:
1. UTï¼ˆå•å…ƒæµ‹è¯•ï¼‰: `pytest tests/` â€” mock ä¾èµ–ï¼ŒéªŒè¯å‡½æ•°é€»è¾‘
2. STï¼ˆç³»ç»Ÿæµ‹è¯•ï¼‰: å¯åŠ¨ uvicorn â†’ curl/httpx è°ƒç”¨ API â†’ æ£€æŸ¥æ•°æ®åº“/WebSocket å¹¿æ’­
3. E2Eï¼ˆç«¯åˆ°ç«¯æµ‹è¯•ï¼‰: å‰åç«¯è”è°ƒï¼Œæµè§ˆå™¨/Playwright é©±åŠ¨å®Œæ•´ç”¨æˆ·æµç¨‹

### DEV-8 Write å·¥å…·è°ƒç”¨ç¼ºå°‘ content å‚æ•°åå¤å¤±è´¥

âŒ é•¿æ–‡æ¡£ç”Ÿæˆæ—¶çŠ¹è±«ï¼Œè¿ç»­ 4 æ¬¡å‘ç©º Write è°ƒç”¨ï¼ˆæ—  contentï¼‰ï¼Œæ¯æ¬¡ç­‰ç”¨æˆ· Continueï¼Œæµªè´¹ 4 è½® ~6 åˆ†é’Ÿ
âœ… Write æ— é•¿åº¦é™åˆ¶ï¼Œä¸€æ¬¡æ€§å¸¦å®Œæ•´ content å†™å…¥ï¼›ç¬¬ä¸€æ¬¡å¤±è´¥åç«‹å³ä¿®æ­£ï¼Œä¸é‡å¤åŒæ ·é”™è¯¯
> å·¥å…·è°ƒç”¨å¤±è´¥åå¿…é¡»è¯»é”™è¯¯ä¿¡æ¯ã€ä¿®æ­£å‚æ•°ï¼Œä¸å…è®¸ç›²ç›®é‡è¯•åŒä¸€è°ƒç”¨ã€‚

### DEV-9 AR å®Œæˆåè·³è¿‡ä¸²è®²ç›´æ¥ç¼–ç 

âŒ TDD-M3 å®Œæˆåç›´æ¥åˆ›å»ºç¼–ç ä»»åŠ¡ï¼Œè·³è¿‡é˜¶æ®µ 3/4/5ï¼ˆä¸²è®² + æµ‹è¯•ç”¨ä¾‹è®¾è®¡ï¼‰
âœ… AR å®ŒæˆåæŒ‰ `development-workflow.md` ç»§ç»­ï¼šæ­£å‘ä¸²è®² â†’ åå‘ä¸²è®² â†’ æµ‹è¯•ç”¨ä¾‹è®¾è®¡ â†’ æ‰èƒ½ç¼–ç 
> CLAUDE.md å·¥ä½œæµåŸæ¥åªå†™åˆ° AR é—¨æ§å°±æ–­äº†ï¼Œå·²è¡¥å…¨å®Œæ•´é“¾è·¯ï¼ˆDEV-9 ä¿®å¤ï¼‰ã€‚

### DEV-10 E2E æµ‹è¯• fixture åª create_all ä¸å…ˆ drop_all â†’ UNIQUE å†²çª

âŒ `setup_db` ç”¨ `Base.metadata.create_all` ä½†ä¸å…ˆæ¸…ç†ï¼Œç”Ÿäº§ DB å·²æœ‰æ•°æ®æ—¶ seed æ’å…¥å†²çª
âœ… fixture å…ˆ `drop_all` å† `create_all`ï¼Œä¿è¯æ¯ä¸ªæµ‹è¯•ä»ç©ºè¡¨å¼€å§‹
> æµ‹è¯•éš”ç¦»æ˜¯åŸºæœ¬åŠŸã€‚create_all å¯¹å·²å­˜åœ¨çš„è¡¨æ˜¯ no-opï¼Œä¸ä¼šæ¸…æ•°æ®ã€‚

### DEV-11 å‰åç«¯å­—æ®µå¯¹é½é ç›®æµ‹ â†’ è¿è¡Œæ—¶æ‰å‘ç°ä¸åŒ¹é…

âŒ å‰ç«¯ types.ts å‡­è®°å¿†å†™å­—æ®µï¼Œä¸é€å­—æ®µæ¯”å¯¹åç«¯ schema
âœ… å†™å®Œ types.ts åé€å­—æ®µæ¯”å¯¹ï¼šå­—æ®µåã€ç±»å‹ã€å¯é€‰æ€§ã€æšä¸¾å€¼ï¼Œåˆ—è¡¨æ ¼ç¡®è®¤
> å­—æ®µåå·®ä¸€ä¸ªå­—æ¯ = è¿è¡Œæ—¶ undefinedã€‚M3 å¯¹é½éªŒè¯ checklistï¼šJobâ†”JobOutã€ShopItemâ†”ItemOutã€WsSystemEventâ†”broadcast payloadã€‚

### DEV-13 ç”¨æˆ·è¯´"ç”¨ CLI"ï¼Œä»ç„¶è‡ªè¡Œç»•è·¯ç›´æ¥æ‰“ REST API

âŒ ç”¨æˆ·æ˜ç¡®è¯´"ç”¨ gemini cli"ï¼Œè„šæœ¬é‡Œè¿˜æ˜¯ç”¨ fetch/undici ç›´æ¥è°ƒ REST endpoint
âœ… "ç”¨ CLI"= `gemini` subprocessï¼ˆstdin pipeï¼‰æ˜¯å”¯ä¸€è·¯å¾„ï¼›CLI ä¸æ”¯æŒçš„åŠŸèƒ½å…ˆé—®ç”¨æˆ·ï¼Œä¸è‡ªè¡Œé™çº§
âŒ CLI å‡ºç° auth/quota é”™è¯¯æ—¶ï¼Œè½¬èº«æ”¹ç”¨ API key æ‰“ REST
âœ… CLI æŠ¥é”™ â†’ æŠ¥é”™ç»™ç”¨æˆ·ï¼Œä¸ç»•è·¯ï¼›quota è€—å°½ â†’ æ˜ç¡®å‘ŠçŸ¥ï¼Œä¸å†å°è¯• REST fallback
âŒ ä¸æŒ‡å®š `-m`ï¼ŒCLI é»˜è®¤ç”¨ Pro â†’ quota å¾ˆå¿«è€—å°½
âœ… æ˜ç¡®æŒ‡å®šæ¨¡å‹ï¼šä»£ç å®¡æŸ¥ç”¨ `gemini-2.5-flash-lite`ï¼ˆ1000 RPDï¼‰ï¼Œè®¾è®¡ç”Ÿæˆ/è§†è§‰å®¡æŸ¥ç”¨ `gemini-2.5-flash`ï¼ˆ250 RPDï¼‰ï¼ŒPro ç•™ç»™ç”¨æˆ·æ‰‹åŠ¨äº¤äº’
> æ ¹å› ï¼šæŠŠ"è°ƒç”¨ Gemini"åˆ†æˆäº†ä¸¤æ¡è·¯ï¼ŒCLI é‡é˜»å°±æ»‘å‘ RESTã€‚ç”¨æˆ·æŒ‡å®šçš„å·¥å…· = ç¡¬çº¦æŸï¼Œä¸æ˜¯"ä¼˜å…ˆé¡¹"ã€‚

### DEV-12 å¤–éƒ¨ CLI é›†æˆï¼šè·³è¿‡ç¯å¢ƒæ¢é’ˆ + è¯¯åˆ¤é”™è¯¯ä¿¡æ¯ â†’ å¤§é‡æ— æ•ˆè½®æ¬¡

âŒ ç›´æ¥å†™è„šæœ¬ â†’ é‡åˆ° PATH/ä»£ç†/è®¤è¯/quota ç­‰é—®é¢˜é€ä¸ªè¡¥æ•‘ï¼Œå…± 25+ è½®
âœ… é›†æˆå¤–éƒ¨ CLI å‰å…ˆåš 4 æ­¥æ¢é’ˆï¼šâ‘  which cli â‘¡ æ£€æŸ¥ HTTPS_PROXY â‘¢ è¯»è®¤è¯é…ç½® â‘£ æ‰‹åŠ¨æµ‹ä¸€æ¡å‘½ä»¤
âŒ Gemini 429 `limit:0` è¯¯åˆ¤ä¸º"æ¯æ—¥ç”¨å°½" â†’ ç»•å» OAuth/resume ç­‰æ–¹æ¡ˆ
âœ… 429 æœ‰ retryDelayï¼ˆç§’æ•°ï¼‰= RPM é€Ÿç‡é™åˆ¶ï¼Œç­‰å¾…å³å¯ï¼›æ—  retryDelay = çœŸæ­£ç”¨å°½
âŒ ç”¨é»˜è®¤æ¨¡å‹ gemini-2.5-proï¼ˆ5 RPM, 100 RPDï¼‰ï¼Œå¼€å‘æµ‹è¯•é¢‘ç¹è°ƒç”¨å¿…ç„¶è§¦é™
âœ… è„šæœ¬ä¼˜å…ˆç”¨ gemini-2.5-flashï¼ˆ10 RPM, 250 RPDï¼‰æˆ– flash-liteï¼ˆ1000 RPDï¼‰
âŒ "æŠŠXåˆ æ‰" â†’ åˆ æ‰æ‰€æœ‰ç›¸å…³å­˜å‚¨ï¼›ç”¨æˆ·æ„å›¾å¯èƒ½åªæ˜¯"ä¸è¦æ˜æ–‡å­˜"
âœ… æ¶‰åŠ"åˆ é™¤"çš„æŒ‡ä»¤å…ˆç¡®è®¤èŒƒå›´ï¼šåˆ åŠŸèƒ½ vs åˆ æŸä¸ªå­˜å‚¨ä½ç½®
> è¯¦è§ [postmortem-dev-bug-10.md](../postmortems/postmortem-dev-bug-10.md)
