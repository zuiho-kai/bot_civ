# R3 脑暴纪要 — M6.3 议题 3：雇佣与工资系统

> 日期：2026-02-21
> 阶段：M6.3 阶段 0 五方脑暴
> 参与：Architect / Tech Lead / QA Lead / Developer / Human Proxy PM

---

## 议题 3：雇佣与工资系统（P5）

### 背景

当前系统有建筑和工人概念，但缺少完整的雇佣流程和工资结算机制。Agent 无法自主招聘、应聘、谈薪，经济循环缺少劳动力市场环节。IR 草稿提出：
- 雇佣流程：建筑所有者发布招聘 → 工人应聘 → 上岗工作
- 工资模式：固定工资（fixed）和分成工资（ratio）
- 欠薪处理：发不出工资时的通知和后果

### 议题 1-2 已拍板约束
- 四维属性（health/energy/satiety/mood）已确认
- 副业递增消耗逼 Agent 转向建筑就业
- 0 点统一换日结算
- 结算时序：先 production_tick → 再 settle_wages

### 各角色观点

- **Architect**：同时实现 fixed + ratio 两种工资模式，数据模型用 wage_type + wage_value 两个字段。去掉 job_dissatisfaction 数值系统，让 Agent 通过感知真实状态自主决策。
- **Tech Lead**：ratio 分成保留小数（Float 直接存），不做四舍五入。结算时序必须严格：先产出进建筑仓库，再按比例发工资。
- **QA Lead**：欠薪场景测试覆盖（全额或全不发）。多建筑受雇但每天只能工作一次的约束验证。
- **Developer**：approve_job 改为 apply_job 直接上岗（自动批准，无等待列表）。实现简单，减少状态管理。
- **Human Proxy PM**：工资展示只显示前几个最高工资的招聘。产能属性：每个产物加基础产能，工人每天产能抽象为 25。

### 共识项（已拍板）

**DC-12：同时实现 fixed + ratio 工资模式**
- 背景：fixed 适合稳定雇佣，ratio 适合风险共担。两种模式覆盖不同经济场景
- 决策：数据模型 wage_type（enum: fixed/ratio）+ wage_value（Float），同时上线

**DC-13：去掉 job_dissatisfaction 数值系统**
- 背景：原设计用不满度数值驱动离职，但这是"系统替 Agent 决策"，违反自主性原则
- 决策：删除 job_dissatisfaction 字段，Agent 通过感知真实状态（欠薪、市场招聘、饥饿）自主决策是否离职

**DC-14：欠薪处理 — 全额或全不发 + 双向通知**
- 背景：部分发薪增加复杂度且不公平（谁先发？），全额或全不发更简单
- 决策：结算时检查建筑仓库余额，够发全额就发，不够就全不发。双向通知（老板和工人都收到消息），工人可在聊天群喊老板

**DC-15：允许多建筑受雇，但每天只能工作一次**
- 背景：限制单建筑受雇太死板，但无限工作会破坏经济平衡
- 决策：Agent 可同时受雇于多个建筑，但每天只能在一个建筑工作一次（work action 执行后标记 has_worked_today）

**DC-16：ratio 分成保留小数**
- 背景：四舍五入会导致小额交易精度丢失
- 决策：Float 直接存，不做舍入

**DC-17：结算时序严格定义**
- 背景：工资依赖产出，必须先产出再发薪
- 决策：先 production_tick（产出进建筑仓库）→ 再 settle_wages（发工资）

**DC-18：apply_job 直接上岗**
- 背景：原设计 approve_job 需要老板审批，增加等待和状态管理复杂度
- 决策：改为 apply_job 直接上岗（自动批准），无等待列表。老板不满意可以 fire

### 分歧项

无。议题 3 所有决策点均已在脑暴中达成一致并拍板。
